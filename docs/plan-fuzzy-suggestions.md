<!-- AICODE-NOTE: NAV/PLAN_FUZZY_SUGGESTIONS plan: fuzzy section suggestions for search input ref: AGENTS.md -->
# Plan: нечеткие подсказки по разделам для строки поиска

- **Scope + non-goals:** добавить подсказки по разделам/категориям с fuzzy-сопоставлением и подстановкой в строку поиска; не менять основной поиск работ/ресурсов и не внедрять серверный полнотекстовый индекс.
- **Affected entry points/files:** `app/index.html` (контейнер подсказок под строкой поиска), `app/css/style.css` (стили чипсов/списка подсказок), `app/js/search.js` (логика подсказок, debounce, подстановка), `app/js/api.js` (новый запрос/индекс разделов), `app/js/ui.js` (рендер подсказок), `app/js/main.js` (подключение обработчиков), `docs/plan-fuzzy-suggestions.md`.
- **Relevant AICODE anchors to read/update:** актуальные анкоры без изменений (`README.md`, `docs/context.md`, `docs/status.md`, `docs/decisions/*`); после правок по-прежнему выполнить `rg -n "AICODE-" README.md docs/*.md`.
- **Risks/contracts to preserve:** не нарушать `AICODE-CONTRACT: CONTRACT/DOCS_REQUIREMENT ... [2025-10-05]`; не деградировать отзывчивость UI (подсказки должны быть быстрыми и кэшироваться по базе); не ломать текущий `registerSearch` и отображение `#search-results`.
- **Test/check list:** ввести «кирпич» — увидеть релевантные разделы; клик по подсказке добавляет слово в строку, подсказки пересчитываются; проверка с опечаткой (например, «кирпичч») всё равно даёт близкие разделы; убедиться, что стандартный поиск по работам остаётся рабочим.

## Phase breakdown (tasks)

- **Phase 1: Data source**
  - Добавить API-метод для получения индекса разделов по базе (код, имя, путь/названия родительских секций).
  - Кэшировать индекс разделов на клиенте, чтобы не дергать BaseX на каждый ввод.
- **Phase 2: Fuzzy matching**
  - Реализовать простую функцию похожести (например, нормализованный Levenshtein или Jaro-Winkler) и ранжирование подсказок.
  - Матчить по последнему слову запроса, собирать top-N подсказок и исключать дубли.
- **Phase 3: UI + UX**
  - Добавить контейнер подсказок под `#search-input`, отрисовывать чипсы-кнопки.
  - По клику подставлять подсказку в строку (замена последнего токена) и триггерить пересчет подсказок + поиск.
